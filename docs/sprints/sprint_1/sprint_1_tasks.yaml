sprint:
  number: 1
  name: "Sprint 0+1 — Foundation + Manual Toy Loop"
  status: "Closed"
  closed_date: "2026-01-25"
  goal: "Ship a deterministic, web-deployable toy loop (move/bonk/win/restart) gated by CI headless tests and a release checklist."

scope:
  committed_stories:
    - story_id: "STORY-001"
      title: "Establish engineering foundation for deterministic gameplay"
      tasks:
        - task_id: "TASK-001-1"
          title: "Add PR CI workflow to run headless unit tests"
          status: "Done"
          implemented_in:
            - ".github/workflows/ci.yml"

        - task_id: "TASK-001-2"
          title: "Gate web deploy workflow on headless tests"
          status: "Done"
          implemented_in:
            - ".github/workflows/deploy-web.yml"

        - task_id: "TASK-001-3"
          title: "Document minimal event schema and privacy rules"
          status: "Done"
          implemented_in:
            - "docs/event_schema.md"

    - story_id: "STORY-015"
      title: "Harden web export deployment workflow and define release checklist"
      tasks:
        - task_id: "TASK-015-1"
          title: "Create web release checklist + smoke test steps"
          status: "Done"
          implemented_in:
            - "docs/release_process.md"
            - "docs/release_checklist.md"

        - task_id: "TASK-015-2"
          title: "Upload export artifacts/logs from CI for failure diagnosis"
          status: "Done"
          implemented_in:
            - ".github/workflows/deploy-web.yml"

    - story_id: "STORY-002"
      title: "Implement deterministic grid representation and collision rules"
      tasks:
        - task_id: "TASK-002-1"
          title: "Create ADR for grid coordinate conventions and input directions"
          status: "Done"
          implemented_in:
            - "docs/adr/ADR-001-grid-coordinates.md"

        - task_id: "TASK-002-2"
          title: "Implement domain GridWorld + MoveResult data types"
          status: "Done"
          implemented_in:
            - "game/src/domain/grid/grid_world.gd"
            - "game/src/domain/grid/move_result.gd"
            - "game/tests/unit/test_grid_world.gd"

        - task_id: "TASK-002-3"
          title: "Implement deterministic MovementService for collisions"
          status: "Done"
          implemented_in:
            - "game/src/domain/grid/movement_service.gd"
            - "game/tests/unit/test_movement_service.gd"

        - task_id: "TASK-002-4"
          title: "Add unit tests for movement/collision determinism"
          status: "Done"
          implemented_in:
            - "game/tests/unit/test_movement_service.gd"

        - task_id: "TASK-002-5"
          title: "Add ManualPlayUseCase to expose move outcomes to adapters"
          status: "Done"
          implemented_in:
            - "game/src/app/manual_play_use_case.gd"
            - "game/tests/unit/test_manual_play_use_case.gd"

    - story_id: "STORY-003"
      title: "Deliver Manual Mode movement with an action log"
      tasks:
        - task_id: "TASK-003-1"
          title: "Configure InputMap actions and manual input adapter"
          status: "Done"
          implemented_in:
            - "game/project.godot"
            - "game/src/adapters/input/manual_input_adapter.gd"
            - "game/tests/unit/test_input_configuration.gd"
            - "game/tests/unit/test_manual_input_adapter.gd"

        - task_id: "TASK-003-2"
          title: "Create GameRoot scene with WorldView and HeroView bound to domain state"
          status: "Done"
          implemented_in:
            - "game/main.tscn"
            - "game/src/adapters/scenes/game_root.tscn"
            - "game/src/adapters/scenes/game_root.gd"
            - "game/src/adapters/view/world_view.gd"
            - "game/src/adapters/view/hero_view.gd"
            - "game/tests/integration/test_game_root_scene.gd"

        - task_id: "TASK-003-3"
          title: "Implement Action Log UI component"
          status: "Done"
          implemented_in:
            - "game/src/adapters/ui/hud.tscn"
            - "game/src/adapters/ui/action_log.gd"

        - task_id: "TASK-003-4"
          title: "Add playful bonk feedback on blocked move"
          status: "Done"
          implemented_in:
            - "game/src/adapters/view/hero_view.gd"
            - "game/src/adapters/scenes/game_root.gd"

    # NOTE: STORY-004 shipped in code but was missing from the original sprint_1_tasks.yaml.
    # Added here during closeout to keep doc↔code alignment.
    - story_id: "STORY-004"
      title: "Add goal tile, win screen, and quick restart"
      tasks:
        - task_id: "TASK-004-1"
          title: "Implement goal detection in domain + unit test"
          status: "Done"
          implemented_in:
            - "game/src/domain/grid/grid_world.gd"
            - "game/src/app/manual_play_use_case.gd"
            - "game/tests/unit/test_grid_world.gd"

        - task_id: "TASK-004-2"
          title: "Add win overlay UI with replay/restart"
          status: "Done"
          implemented_in:
            - "game/src/adapters/ui/win_overlay.tscn"
            - "game/src/adapters/ui/win_overlay.gd"
            - "game/src/adapters/scenes/game_root.gd"

        - task_id: "TASK-004-3"
          title: "Deterministic restart/reset"
          status: "Done"
          implemented_in:
            - "game/src/app/manual_play_use_case.gd"
            - "game/src/adapters/scenes/game_root.gd"
            - "game/tests/unit/test_manual_play_use_case.gd"

        - task_id: "TASK-004-4"
          title: "QA web smoke playtest + regression checklist"
          status: "Deferred"
          notes:
            - "No playtest notes/checklist were committed to the repo."
            - "Use the smoke test steps in docs/release_process.md and capture evidence next sprint."
            - "Tracked in docs/sprints/backlog.md for future sprint planning."

decisions:
  - id: "ADR-001"
    title: "Grid coordinate conventions and move directions"
    status: "Accepted"
    reference: "docs/adr/ADR-001-grid-coordinates.md"
